<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
        <link rel="stylesheet" href="css/login.css">
        <title>Registro</title>
    </head>
    <body>
        <div class="container">
            <div class="login-box">
                <img class="avatar" src="img/tec.jpg">
                <form name="f1" id="formulario">
                    <br>
                    <label for="numdni">DNI del alumno: </label>            
                    <input type="number" id="dni" placeholder="Ej:1234567890" required>
                    
                    <label for="email">Ingrese su Email:</label>
                    <input type="email" id="email" placeholder="ejemplo@gmail.com" required>
                    
                    <label for="contraseña">Escribe una contraseña: </label>
                    <div class="password">
                        <input type="password" id="clave1" placeholder="Introduzca su contraseña">
                    </div>

                    <label for="contraseña">Repita la contraseña:</label>
                    <div class="password">
                        <input type="password" id="clave2" placeholder="Repita la contraseña">
                    </div>
                    
                    <div class="submit">
                    <input type="submit" value="Entrar"></input> <br>
                    
                    </div>
                    <div class="a">
                        <a href="login.html" id="a">Ya tengo cuenta.</a>
                    </div>
                </form>
            </div>
        </div>
        <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-database.js"></script>
        <script src="js/config.js"></script>
        <script src="js/index.js"></script>
        <script>
            window.onload = () => {
                initializeApp();
                
                document.getElementById('formulario').onsubmit = (e) => {
                    e.preventDefault();
                    if(!comprobarClave()) {
                        throw new Error('Las contraseñas no coinciden');
                    }
                    registrar();
                };
            }

            function registrar() {
                const credenciales = {
                    dni: document.getElementById('dni').value,
                    email: document.getElementById('email').value,
                    password: document.getElementById('clave1').value,
                };

                Alumno.registrar(credenciales)
            }

            function comprobarClave(){
                clave1 = document.f1.clave1.value;
                clave2 = document.f1.clave2.value;

                if (clave1 === clave2) return true;
                else return false;
            }
        </script>
    </body>
</html>
